@startuml
title Customer::placeOrder(order : Order) : Boolean

start
if (order.items->exists(i | i.article.itemsInStock < i.quantity)) then ([true])
  :return false;
  stop
else ([false])
    partition "**for** i **in** order.items" {
      :i.article.itemsInStock := i.article.itemsInStock - i.quantity;
    }
    :self.orders := self.orders->including(order);
    :return true;
    stop
endif
@enduml
